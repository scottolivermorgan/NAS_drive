# This playbook pulls the latest Komga Docker image and runs a container using that image.

# Pull the latest Komga Docker image
- name: Pull Komga Docker image
  community.docker.docker_image:
    name: gotson/komga:latest
    source: pull

# Run Komga Docker container
- name: Run Komga Docker container
  community.docker.docker_container:
    name: komga
    image: gotson/komga:latest
    state: started
    restart_policy: always  # Always restart the container if it stops
    published_ports:
      - "25600:25600"  # Port mapping from host to container
    timeout: 240  # Timeout period (seconds)

#docker create \
# --name=komga \
# --user 1000:1000 \
# -p 25600:25600 \
# --mount type=bind,source=/path/to/config,target=/config \
# --mount type=bind,source=/path/to/data,target=/data \
# --restart unless-stopped \
# gotson/komga