# Copy enviroment vars required by docker compose file to host
#- name: Copy .env file
#  ansible.builtin.copy:
#    src: nextcloud_compose/.env
#    dest: /home/scott/NAS_drive/ansible/tasks/nextcloud_compose/.env

- name: Create the .env file from template
  template:
    src: /env_templates/nextcloud.env.j2
    dest: /home/{{ ansible_env.USER }}/NAS_drive/ansible/tasks/nexcloud_compose/.env

- name: Create and start Nextcloud and mariaDB
  become: true
  community.docker.docker_compose_v2:
    project_src: /home/{{ ansible_env.USER }}/NAS_drive/ansible/tasks/nextcloud_compose
  register: output
