# This playbook pulls the latest Nextcloud Docker image and runs a container using that image.

# Pull the latest nextcloud Docker image
- name: Pull Nextcloud Docker image
  community.docker.docker_image:
    name: nextcloud:latest
    source: pull

# Run the Jellyfin Docker container
- name: Run Nextcloud Docker container
  community.docker.docker_container:
    name: nextcloud
    image: nextcloud:latest
    state: started
    restart_policy: always  # Always restart the container if it stops
    published_ports:
      - "80:80"  # Port mapping (host_port:container_port)
    timeout: 240  # Timeout for starting the container (seconds)


#sudo docker run -d -p 80:80 --name nextcloud --restart unless-stopped \
#-v /mnt/external/nextcloud:/var/www/html \
#-v /mnt/external/apps:/var/www/html/custom_apps \
#-v /mnt/external/config:/var/www/html/config \
#-v /mnt/external/data:/var/www/html/data \
#-v /mnt/external/theme:/var/www/html/themes nextcloud 