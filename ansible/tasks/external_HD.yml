#- name: Generate config.json using Jinja2 template
#  template:
#    src: ../config/config_template.j2
#    dest: /home/{{ ansible_env.USER }}/NAS_drive/config/config.json

- name: Initialise external hard drives
  ansible.builtin.shell:
    cmd: |
      venv/bin/python -m functions.HD_init
    chdir: /home/{{ ansible_user }}/NAS_drive
  become: true

- name: Create directory structure
  become: true
  ansible.builtin.file:
    path: "{{ item }}"
    state: directory
    mode: '0777'
  loop:
    - /media/HD_1/Media
    - /media/HD_1/Media/Metadata
